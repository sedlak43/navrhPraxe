{% extends 'base.html.twig' %}

{% block title %}Cestovní kancelář VŠPJ{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        /* Main content padding to align with header */
        main {
            padding-top: 76px;
        }

        /* Hero section styles */
        .hero {
            position: relative;
            color: white;
            background-size: cover; /* Cover the entire container with the background image */
            background-position: center;
            padding: 5rem 1rem; /* Padding around the hero content */
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
        }

        /* Centering hero content */
        .hero-content {
            text-align: center; /* Center the entire content horizontally */
            margin-bottom: 2rem; /* Space below the hero text */
            color: black;
        }

        .hero-content h1 {
            text-align: center; /* Ensure the h1 stays centered */
        }

        .hero-content p {
            text-align: left; /* Keep paragraph text left-aligned */
        }

        .hero-content .lead {
            text-align: left; /* Align the paragraph and ul text to the left */
        }

        .hero-content ul {
            text-align: left; /* Ensure the ul is aligned left */
            padding-left: 20px; /* Optional: Adjust left padding for list */
        }

        /* Search form container */
        .hero-form-container {
            width: 100%;
            max-width: 1000px; /* Limit the maximum width of the form */
            display: flex;
            flex-wrap: wrap; /* Allow form elements to wrap if they don’t fit in one line */
            gap: 1rem; /* Space between form elements */
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent background for the form */
            padding: 20px;
            border-radius: 4px; /* Rounded corners for the form */
            box-sizing: border-box; /* Include padding in element's total width and height */
        }

        /* Styles for carousel images */
        .carousel-item img {
            width: 100%; /* Make image full width */
            max-height: 500px; /* Limit the height of the image */
            object-fit: cover; /* Ensure the image covers the container without distortion */
            object-position: center; /* Center the image within its container */
            padding-top: 0;
            padding-bottom: 20px;
        }

        /* Form group styling */
        .form-group {
            flex: 1; /* Allow form groups to grow */
            min-width: 150px; /* Minimum width of form groups */
            display: flex;
            flex-direction: column;
        }

        /* Ensure form controls have a fixed width */
        .form-group select,
        .form-group input,
        .form-group button {
            width: 220px; /* Fixed width for all controls */
        }

        /* Adjust button width if needed */
        .form-group button {
            width: 220px; /* Fixed width for button */
        }

        .image-container {
            width: 150px; /* You can adjust this size */
            height: 150px; /* Same height to keep it square */
            border-radius: 50%; /* Creates the circle */
            overflow: hidden; /* Ensures the image stays within the circle */
            border: 3px solid #fff; /* Optional: Adds a white border */
            margin: 0 auto 15px auto; /* Centers the image and adds some margin below */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Optional: Adds a shadow for depth */
        }

        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures the image covers the entire circle */
        }

        .outlined-heading {
            font-size: 2.5em;
            font-weight: bold;
            color: white; /* Barva textu */
            text-shadow:
                    -1px -1px 0 #000,
                    1px -1px 0 #000,
                    -1px  1px 0 #000,
                    1px  1px 0 #000; /* Čtyři stíny kolem textu */
        }

        .outlined-heading-main {
            width: 900px;
        }

        .carousel-item img {
            width: 100%; /* Make image full width */
            max-height: 500px; /* Limit the height of the image */
            object-fit: cover; /* Ensure the image covers the container without distortion */
            object-position: center; /* Center the image within its container */
            border: none;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Adjust featurette styling */
        .featurette {
            display: flex;
            flex-wrap: wrap; /* Ensure wrapping for better layout on smaller screens */
            align-items: center; /* Center-align the content */
            margin-bottom: 30px; /* Add space between featurettes */
        }

        /* Ensure images and text are well aligned */
        .featurette img {
            width: 100%; /* Full width on smaller screens */
            max-width: 480px; /* Maximum width for larger screens */
            height: auto;
            margin: auto; /* Center the image */
            border-radius: 4px;
        }

        /* Ensure the text fits next to the image */
        .featurette-heading {
            margin-bottom: 20px;
            font-size: 1.8rem;
            line-height: 1.2;
        }

        /* Container for the columns */
        .col-lg-4.text-center {
            display: flex; /* Enables flex layout */
            flex-direction: column; /* Stack content vertically */
            justify-content: center; /* Centers content vertically */
            align-items: center; /* Centers content horizontally */
            flex-basis: 33.333%; /* Each item takes up 1/3 of the row */
        }

        /* Parent container holding all the items */
        .row {
            display: flex; /* Enable flexbox for the row */
            justify-content: space-around; /* Distribute the items evenly */
            flex-wrap: wrap; /* Allow wrapping if needed on smaller screens */
        }

        /* Ensures equal padding and margins between items */
        .col-lg-4.text-center {
            padding: 20px; /* Adds padding around each item */
            box-sizing: border-box; /* Ensures padding doesn't add to the total width */
        }

        /* Responsive adjustments for mobile screens */
        @media (max-width: 768px) {

            .featurette {
                flex-direction: column; /* Stack text and image vertically on small screens */
                text-align: center; /* Center text */
            }

            .featurette-heading {
                font-size: 1.5rem; /* Smaller heading for small screens */
            }

            .featurette img {
                max-width: 100%; /* Allow the image to take up full width on small screens */
                margin-bottom: 20px; /* Add space between image and text */
            }

            .col-lg-4.text-center {
                flex-basis: 100%; /* On mobile, make each item full width */
                margin-bottom: 20px; /* Add some space between items */
            }

            /* Adjust padding and spacing for mobile */
            main {
                padding-top: 50px; /* Reduce padding for smaller screens */
            }

            /* Carousel image adjustments for smaller screens */
            .carousel-item img {
                max-height: 300px; /* Reduce height for mobile */
            }

            /* Hero text size adjustments */
            .hero-content h1 {
                font-size: 1.8rem; /* Smaller heading size */
            }

            /* Form controls for better fit on smaller screens */
            .form-group select,
            .form-group input,
            .form-group button {
                width: 100%; /* Full width for form elements */
            }

            /* Center the hero form for better layout */
            .hero-form-container {
                width: 100%;
                padding: 1rem; /* Add padding for mobile */
            }

            /* Image containers for smaller screens */
            .image-container {
                width: 100px; /* Adjust image size for mobile */
                height: 100px; /* Keep it square */
            }

            /* Centered text and image */
            .col-lg-4 h2 {
                font-size: 1.25rem; /* Reduce font size */
            }
        }

        /* Further adjustments for extra small screens */
        @media (max-width: 576px) {
            .carousel-item img {
                max-height: 200px; /* Even smaller height for extra small screens */
            }

            /* Further adjustments to hero text */
            .hero-content h1 {
                font-size: 1.5rem; /* Reduce text size more */
            }

            /* Reduce padding in form container */
            .hero-form-container {
                padding: 0.5rem;
            }

            /* Adjust featurette images */
            .featurette img {
                max-width: 100%; /* Make sure images take full width */
                max-height: 240px; /* Restrict image height */
            }

            /* Adjust button sizes */
            .btn {
                width: 100%; /* Full width buttons for mobile */
            }
        }
    </style>
{% endblock %}


{% block main %}
    <!-- Hero Section with Background Image and Text -->
    <section class="hero py-5" style="background-image: url('{{ asset('images/defaultE.png') }}'); background-size: cover; background-position: center;">
        <div class="hero-content">
            <h1 class="display-4 outlined-heading-main">Vítejte v Cestovní kanceláři<br> Vysoké školy polytechnické Jihlava</h1>
        </div>

        <div class="hero-form-container">
            <form method="get" action="{{ path('zajezdy_list') }}" style="display: flex; flex-wrap: wrap; gap: 1rem; width: 100%;">

                <!-- Destination Dropdown -->
                <div class="form-group">
                    <select class="form-select" id="destinationDropdown" name="destinace" aria-label="Destinace">
                        <option selected disabled>Destinace</option>
                        {% for destinace in destinaces|sort %}
                            <option value="{{ destinace }}" {% if selected_destinace == destinace %}selected{% endif %}>
                                {{ destinace }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Doprava Dropdown -->
                <div class="form-group">
                    <select class="form-select" id="dopravaDropdown" name="doprava" aria-label="Doprava">
                        <option selected disabled>Doprava</option>
                        {% for doprava in dopravas|sort %}
                            <option value="{{ doprava }}" {% if doprava == selected_doprava %}selected{% endif %}>
                                {{ doprava }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Date Picker -->
                <div class="form-group" id="datePickerContainer">
                    <input type="month" class="form-control" id="datePicker" name="date" aria-label="Datum" value="{{ selected_date }}">
                </div>

                <!-- Search Button -->
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Hledat</button>
                </div>
            </form>
        </div>
    </section>


    <div class="container mt-4" style="padding: 20px">
            <div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel" style="">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2" class="active" aria-current="true"></button>
                    <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                    {% if carouselHomepage.carouselHomepageImage1 %}
                        <div class="carousel-item active">
                            <img src="{{ asset('uploads/zajezdy/carousel/' ~ carouselHomepage.carouselHomepageImage1) }}" class="d-block w-100" alt="Slide 1">
                            <div class="container">
                                <div class="carousel-caption">
                                    <h1 class="outlined-heading">Zájezdy</h1>
                                    <p><a class="btn btn-lg btn-primary text" href="/zajezdy">Zjistit více</a></p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    {% if carouselHomepage.carouselHomepageImage2 %}
                        <div class="carousel-item">
                            <img src="{{ asset('uploads/zajezdy/carousel/' ~ carouselHomepage.carouselHomepageImage2) }}" class="d-block w-100" alt="Slide 2">
                            <div class="container">
                                <div class="carousel-caption">
                                    <h1 class="outlined-heading">O nás</h1>
                                    <p><a class="btn btn-lg btn-primary" href="/onas">Zjistit více</a></p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    {% if carouselHomepage.carouselHomepageImage3 %}
                        <div class="carousel-item">
                            <img src="{{ asset('uploads/zajezdy/carousel/' ~ carouselHomepage.carouselHomepageImage3) }}" class="d-block w-100" alt="Slide 3">
                            <div class="container">
                                <div class="carousel-caption text-end">
                                    <h1 class="outlined-heading">Fotogalerie</h1>
                                    <p><a class="btn btn-lg btn-primary" href="/galerie">Zjistit více</a></p>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    <!-- Marketing messaging and featurettes -->
    <div class="container">
        <div class="row">
            {% for vystaveneZajezdy in vystaveneZajezdy %}
                {% if vystaveneZajezdy.vystavenyZajezd1 %}
                    <div class="col-lg-4 text-center">
                        <div class="image-container">
                            <img src="{{ asset('uploads/zajezdy/' ~ vystaveneZajezdy.vystavenyZajezd1.carouselImage2) }}" class="img-fluid" alt="{{ vystaveneZajezdy.vystavenyZajezd1.nazev }}">
                        </div>
                        <h2 style="margin-bottom: 20px">{{ vystaveneZajezdy.vystavenyZajezd1.nazev }}</h2>
                        <a href="{{ path('zajezd_show', {nazev: vystaveneZajezdy.vystavenyZajezd1.nazev}) }}" class="btn btn-primary">Zjisti více</a>
                    </div>
                {% endif %}
                {% if vystaveneZajezdy.vystavenyZajezd2 %}
                    <div class="col-lg-4 text-center">
                        <div class="image-container">
                            <img src="{{ asset('uploads/zajezdy/' ~ vystaveneZajezdy.vystavenyZajezd2.carouselImage2) }}" class="img-fluid" alt="{{ vystaveneZajezdy.vystavenyZajezd2.nazev }}">
                        </div>
                        <h2 style="margin-bottom: 20px">{{ vystaveneZajezdy.vystavenyZajezd2.nazev }}</h2>
                        <a href="{{ path('zajezd_show', {nazev: vystaveneZajezdy.vystavenyZajezd2.nazev}) }}" class="btn btn-primary">Zjisti více</a>
                    </div>
                {% endif %}
                {% if vystaveneZajezdy.vystavenyZajezd3 %}
                    <div class="col-lg-4 text-center">
                        <div class="image-container">
                            <img src="{{ asset('uploads/zajezdy/' ~ vystaveneZajezdy.vystavenyZajezd3.carouselImage2) }}" class="img-fluid" alt="{{ vystaveneZajezdy.vystavenyZajezd3.nazev }}">
                        </div>
                        <h2 style="margin-bottom: 20px">{{ vystaveneZajezdy.vystavenyZajezd3.nazev }}</h2>
                        <a href="{{ path('zajezd_show', {nazev: vystaveneZajezdy.vystavenyZajezd3.nazev}) }}" class="btn btn-primary">Zjisti více</a>
                    </div>
                {% endif %}
            {% else %}
                <p>No records found.</p>
            {% endfor %}
        </div>
    </div>

        <!-- Featurettes -->
    <section class="container mt-4">
        <hr>

        {% for aktualita in aktuality %}
            <div class="row featurette mb-4">
                {% if loop.index is odd %}
                    <div class="col-md-7">
                        <h2 class="featurette-heading">{{ aktualita.nazev }}</h2>
                        <p class="lead">{{ aktualita.popisek }}</p>
                    </div>
                    <div class="col-md-5">
                        {% if aktualita.obrazek %}
                            <img src="{{ asset('uploads/aktuality/' ~ aktualita.obrazek) }}" class="featurette-image img-fluid mx-auto" alt="{{ aktualita.nazev }}" style="max-height: 480px; max-width: 480px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); border-radius: 4px">
                        {% else %}
                            <img src="{{ asset('images/default-image.jpg') }}" class="featurette-image img-fluid mx-auto" alt="Default Image" style="max-height: 480px; max-width: 480px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); border-radius: 4px">
                        {% endif %}
                    </div>
                {% else %}
                    <div class="col-md-5">
                        {% if aktualita.obrazek %}
                            <img src="{{ asset('uploads/aktuality/' ~ aktualita.obrazek) }}" class="featurette-image img-fluid mx-auto" alt="{{ aktualita.nazev }}" style="max-height: 480px; max-width: 480px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); border-radius: 4px">
                        {% else %}
                            <img src="{{ asset('images/default-image.jpg') }}" class="featurette-image img-fluid mx-auto" alt="Default Image" style="max-height: 480px; max-width: 480px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); border-radius: 4px">
                        {% endif %}
                    </div>
                    <div class="col-md-7">
                        <h2 class="featurette-heading">{{ aktualita.nazev }}</h2>
                        <p class="lead">{{ aktualita.popisek }}</p>
                    </div>
                {% endif %}
            </div>

            <hr>
        {% endfor %}
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const destinationDropdown = document.getElementById('destinationDropdown');
            const dopravaDropdownContainer = document.getElementById('dopravaDropdownContainer');
            const dopravaDropdown = document.getElementById('dopravaDropdown');
            const datePickerContainer = document.getElementById('datePickerContainer');
            const searchButtonContainer = document.getElementById('searchButtonContainer');

            // Event listener for the first dropdown
            destinationDropdown.addEventListener('change', function () {
                const selectedValue = this.value;

                // Populate the second dropdown based on the first dropdown selection
                dopravaDropdownContainer.style.display = 'block'; // Show the doprava dropdown
                datePickerContainer.style.display = 'block'; // Show the date picker
                searchButtonContainer.style.display = 'block'; // Show the search button
            });

            // Event listener for the second dropdown
            dopravaDropdown.addEventListener('change', function () {
                datePickerContainer.style.display = 'block'; // Show the date picker
            });

            // Event listener for the date picker
            datePickerContainer.addEventListener('change', function () {
                searchButtonContainer.style.display = 'block'; // Show the search button
            });
        });
    </script>
{% endblock %}
